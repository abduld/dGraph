<!DOCTYPE html>
<html lang="de" dir="ltr">
<head>
<title>Layered DirectedGraph</title>
<link href="graph/resources/dgraph.css" type="text/css" rel="stylesheet">
</head>

<body class="dgraph">
<div id="graphCanvas"></div>
<script type="text/javascript">
var dojoConfig = {
	async: true,
	packages: [
		{name: 'graph', location: '/graph'}
	]
};
</script>
<script type="text/javascript" src="/dojo/1.9.1/dojo/dojo.js"></script>
<script type="text/javascript">
require([
	'graph/DirectedGraphLayout',
	'graph/SvgRenderer',
    'dojo/domReady!'
], function(DirectedGraphLayout, SvgRenderer) {
    var graph, svg,
        graphData = {
            numLayer: 4,
            maxPerLayer: 2,
            nodeList: [
                { label: 'Rubecula', layer: 0 },
                { label: 'Turdus', layer: 3 },
                { label: 'Corvus', layer: 1 },
                { label: 'Falco', layer: 1 },
                { label: 'Cathartes', layer: 2 }
            ],
            adjList: [
                [2,3,4],
                [],
                [1],
                [],
                []
            ]
        };

    graph = new DirectedGraphLayout({
        numLayer: graphData.numLayer
    });
    svg = new SvgRenderer({
        canvas: 'graphCanvas',
        gridSize: {
            meshWidth: 100,
            meshHeight: 120
        }
    });

    graph.initNodeList(graphData.nodeList);
    graph.addEdges(graphData.nodeList, graphData.adjList);
    graph.expandNodeList();
    graph.minimizeCrossings(20);
   // graph.compact();
    graph.setLayoutPosition();

    svg.render(graph);
});
</script>
</body>
</html>